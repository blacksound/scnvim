#!/bin/sh

pipe_loc=/tmp/sc.nvim-pipe
pipe_loc_pid=/tmp/sc.nvim-pipe-pid

if [[ -f "$pipe_loc_pid" ]]; then
  echo "A sclang process is already running"
  exit 1
fi

if [[ ! -p "$pipe_loc" ]]; then
  mkfifo "$pipe_loc"
fi

cat > "$pipe_loc" &
# save pid
echo $! > "$pipe_loc_pid"

# "$pipe_loc" | sclang -i scvim
sclang -i scvim < "$pipe_loc"
